# Write_Power_HPR代码培训

---
* 主讲人：小马哥
* 时间：2020/1/29
---
[TOC]

## 在线翻译
[云译通在线翻译网站](www.ctc666.com)，效果还行，按字收费，可以建立excel对应术语库

## WritePowerHPR
* 密度处理：质量守恒/形变后的体积，如一个cell内的
* 耦合模式
  * 内耦合：所有的代码都在一个程序里，运行一个程序，完全透明
  * 外耦合：外面有个脚本，控制另外两个程序运行，两个黑箱
  * 混合耦合：有一个黑箱ANSYS，有一个是透明的（RMC）
* WritePowerHPR
  * 功能：处理功率，唤醒ANSYS，并给ANSYS功率文件
  * 功率文件中Ave为均值，RE为相对误差，都录入，但是不一定都用
  * 删掉delete_lock，解锁中断（之前如果中断过ANSYS计算，会产生这样一个锁文件）
  * 利用输入的平均功率密度将相对功率转化为实际功率密度
  * 功率场备份，一个用于读取，一个用于备份
  * 实现功率松弛，并可以计算计算步间的功率平均偏差和绝对偏差，用以功率判敛
  * submission函数提交APDL运行，类似于system函数，不过更加robust
  * checkBatchJobFinished，等待检查信号文件
  * 总结
    * 处理功率
    * 提交ANSYS
    * Check信号文件
## Read_TH
* 读取温度和密度比率
* 读取APDL_tmp_den.dat，此为通过一个apdl指令文件要求ANSYS输出的
* 按照特定数据格式读入，存入相应数组
* 所有都是分层的，基体，燃料，反射层（控制鼓当作反射层）
